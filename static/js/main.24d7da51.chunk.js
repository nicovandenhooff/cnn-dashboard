(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,a,t){e.exports=t(146)},118:function(e,a,t){},123:function(e,a,t){},124:function(e,a,t){},144:function(e,a,t){},145:function(e,a,t){},146:function(e,a,t){"use strict";t.r(a);var n,r=t(0),l=t.n(r),o=t(23),c=t.n(o),i=(t(118),t(11)),s=t(99),m=t.n(s),u=t(192),d=t(194),p=t(195),f=t(196),g=t(197),x=t(198),b=t(183),E=t(186),h=t(188),y=t(62),v=[],j=function(){var e=Object(r.useState)(null),a=Object(i.a)(e,2),t=a[0],n=a[1],o=function(){n(null)};return l.a.createElement(u.a,{position:"static"},l.a.createElement(d.a,{maxWidth:"xl"},l.a.createElement(p.a,{disableGutters:!0},l.a.createElement(f.a,{variant:"h5",component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}}},"Indoor Scene Detector"),l.a.createElement(g.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}}},l.a.createElement(x.a,{size:"large","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},color:"inherit"},l.a.createElement(m.a,null)),l.a.createElement(b.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(t),onClose:o,sx:{display:{xs:"block",md:"none"}}},v.map(function(e){return l.a.createElement(E.a,{key:e,onClick:o},l.a.createElement(y.b,{to:"/"},l.a.createElement(f.a,{textAlign:"center"},e)))}))),l.a.createElement(f.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"flex",md:"none"}}},"Indoor Scene Detector"),l.a.createElement(g.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex",justifyContent:"flex-end"}}},v.map(function(e){return l.a.createElement(h.a,{key:e,onClick:o,sx:{my:2,color:"white",display:"block"}},e)})))))},w=function(e){var a=e.children;return l.a.createElement(d.a,{maxWidth:"xl",sx:{flexGrow:1,display:"flex",flexDirection:{xs:"column",md:"row"}}},a)},k=t(54),O=t(191),S=t(74),C=t(105),F=Object(C.a)({typography:{fontFamily:['"Montserrat"',"Open Sans"].join(",")}}),N=Object(C.a)(Object(S.a)({},F,{palette:{type:"dark",primary:{main:"#26a27b"},secondary:{main:"#fafafa"}}})),L=Object(C.a)(Object(S.a)({},F,{palette:{type:"light",primary:{main:"#8499B1"},secondary:{main:"#053C5E"}}})),R={body:"#FFF",text:"black",backgroundColor:"#26a27b"},D={body:"#363537",text:"#FAFAFA",background:"#999"},I=Object(r.createContext)("light"),W=function(e){var a=e.children,t=function(){var e=Object(r.useState)("light"),a=Object(i.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)(!1),o=Object(i.a)(l,2),c=o[0],s=o[1],m=function(e){window.localStorage.setItem("theme",e),n(e)};return Object(r.useEffect)(function(){var e=window.localStorage.getItem("theme");e?n(e):m("light"),s(!0)},[]),[t,function(){m("light"===t?"dark":"light")},c]}(),n=Object(i.a)(t,3),o=n[0],c=n[1],s=n[2];return l.a.createElement(I.Provider,{value:{theme:o,toggleTheme:c,componentMounted:s}},l.a.createElement(k.a,{theme:"light"===o?R:D},l.a.createElement(O.a,{theme:"light"===o?L:N},a)))},A=(t(123),t(124),function(e){var a=e.isShowing,t=e.toggle,n=Object(r.useRef)();return function(e,a){Object(r.useEffect)(function(){var t=function(t){e.current&&!e.current.contains(t.target)&&a(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[e,a])}(n,function(){return t(!1)}),l.a.createElement(l.a.Fragment,null,a?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"modal-overlay"}),l.a.createElement("div",{className:"modal-wrapper","aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},l.a.createElement("div",{ref:n,className:"modal"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"modal-close-button","data-dismiss":"modal","aria-label":"Close",onClick:function(){t(!1)}},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("p",null,"Whoops! Looks like you've forgotten to select or upload a photo.")))),document.body):null)}),P=t(75),U=t.n(P),T=t(102),B=t(189),M=t(190),z=t(201),G=t(185),_=t(103),J=t.n(_).a.create({baseURL:"https://cnn-dashboard-backend.herokuapp.com/"}),K=t(199),V=t(200),H=function(e){var a=e.handleFileUpload;return l.a.createElement(g.a,{sx:{mb:2}},l.a.createElement(K.a,{sx:{gridAutoFlow:"column",gridTemplateColumns:"repeat(auto-fill,minmax(100px,1fr)) !important",gridAutoColumns:"minmax(100px, 1fr)"}},q.map(function(e){return l.a.createElement(V.a,{key:e.id,sx:{cursor:"pointer"}},l.a.createElement("img",{src:"".concat(e.src),alt:e.title,loading:"lazy",onClick:a,id:e.id}))})))},q=[{src:"assets/images/airport.jpeg",title:"Airport",id:"airport"},{src:"assets/images/bakery.jpeg",title:"Bakery",id:"bakery"},{src:"assets/images/bar.jpeg",title:"Bar",id:"bar"},{src:"assets/images/bedroom.jpeg",title:"Bedroom",id:"bedroom"},{src:"assets/images/kitchen.jpeg",title:"Kitchen",id:"kitchen"},{src:"assets/images/livingroom.jpeg",title:"Living Room",id:"livingroom"},{src:"assets/images/pantry.jpeg",title:"Pantry",id:"pantry"},{src:"assets/images/restaurant.jpeg",title:"Restaurant",id:"restaurant"},{src:"assets/images/subway.jpeg",title:"Subway",id:"subway"},{src:"assets/images/warehouse.jpeg",title:"Warehouse",id:"warehouse"}],Q=(t(144),t(104)),X=t.n(Q),Y=function(e){var a=e.handleFileUpload,t=l.a.useRef(null);return l.a.createElement(g.a,{sx:{mb:4,alignSelf:"center"}},l.a.createElement(h.a,{onClick:function(e){t.current.click()},variant:"outlined",color:"secondary"},l.a.createElement(X.a,{sx:{mr:1}}),l.a.createElement(f.a,{variant:"body",noWrap:!0},"Upload an image")),l.a.createElement("input",{type:"file",ref:t,onChange:a,style:{display:"none"},accept:".jpeg, .png, .jpg"}))},Z=function(e){var a=e.image,t=e.toggle,n=e.setImage,o=e.setPredictions,c=(e.loading,e.setLoading),s=Object(r.useState)("alexnet"),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(r.useState)(null),g=Object(i.a)(p,2),x=g[0],b=g[1],E=function(){var e=Object(T.a)(U.a.mark(function e(a){var t,r,l,o,c,i;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=a.target).id){e.next=12;break}return o=document.getElementById(t.id),e.next=5,fetch(o.src);case 5:return e.next=7,e.sent.blob();case 7:c=e.sent,l=t.src,r=new File([c],l,c),e.next=14;break;case 12:r=a.target.files[0],l=URL.createObjectURL(r);case 14:return e.next=16,y(r);case 16:i=e.sent,b(i),n(l);case 19:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),y=function(e){return new Promise(function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){a(n.result)},n.onerror=function(e){t(e)}})},v=function(e){if(!a||!u)return t(!0);c(!0),e.preventDefault();var n="simple_cnn"!==u?u+"_tuned":"simple_cnn";return J.post("/api/predict",{image:x,modelName:n}).then(function(e){o(e.data),c(!1)}).catch(function(e){console.log("error = ".concat(e))})};return l.a.createElement(B.a,{className:"form"},l.a.createElement(f.a,null,"1. Select or upload an image:"),l.a.createElement(H,{handleFileUpload:E}),l.a.createElement(Y,{handleFileUpload:E}),l.a.createElement(f.a,null,"2. Select a network:"),l.a.createElement(M.a,{"aria-labelledby":"network-label",defaultValue:"densenet121",name:"network",onChange:function(e){return d(e.target.value)},className:"radio-group"},l.a.createElement(z.a,{value:"densenet121",control:l.a.createElement(G.a,null),label:l.a.createElement(f.a,{variant:"body2"},"DenseNet (Tuned)")}),l.a.createElement(z.a,{value:"resnet18",control:l.a.createElement(G.a,null),label:l.a.createElement(f.a,{variant:"body2"},"ResNet (Tuned)")}),l.a.createElement(z.a,{value:"alexnet",control:l.a.createElement(G.a,null),label:l.a.createElement(f.a,{variant:"body2"},"AlexNet (Tuned)")}),l.a.createElement(z.a,{value:"simple_cnn",control:l.a.createElement(G.a,null),label:l.a.createElement(f.a,{variant:"body2"},"Vanilla CNN (No Transfer Learning)")})),l.a.createElement(h.a,{variant:"contained",type:"submit",onClick:v,sx:{alignSelf:"flex-end",width:"100%",maxWidth:"-webkit-fill-available"}},"Submit"))},$=(t(145),function(e){var a=e.src;return l.a.createElement("div",null,l.a.createElement("img",{src:a,className:"image",alt:"upload"}))}),ee=t(202),ae=t(203),te=t(204),ne=t(205),re=t(206),le=t(207),oe=t(22),ce=Object(k.b)(n||(n=Object(oe.a)(["\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n\n  body {\n    background: ",";\n    color: ",";\n    margin: 0;\n    padding: 0;\n    transition: all 0.3s ease-in;\n    font-family: 'Montserrat', cursive;\n  }"])),function(e){return e.theme.body},function(e){return e.theme.text}),ie=function(){var e,a=Object(r.useState)(),t=Object(i.a)(a,2),n=t[0],o=t[1],c=Object(r.useState)(null),s=Object(i.a)(c,2),m=s[0],u=s[1],p=Object(r.useState)(!1),x=Object(i.a)(p,2),b=x[0],E=x[1],h=Object(r.useContext)(I).theme,v=function(){var e=Object(r.useState)(!1),a=Object(i.a)(e,2),t=a[0],n=a[1];return{showModal:t,toggle:function(){return n(!t)}}}(),k=v.showModal,O=v.toggle;m&&(e=m.saliency_b64.slice(0,-1).substring(2));return l.a.createElement(l.a.Fragment,null,l.a.createElement(ce,null),l.a.createElement("div",{className:"light"===h?"light theme":"dark theme"},l.a.createElement(y.a,null,l.a.createElement(j,null)),l.a.createElement(A,{isShowing:k,toggle:O}),l.a.createElement(d.a,{maxWidth:"xl",sx:{flexGrow:1,display:"flex",flexDirection:"column"}},l.a.createElement(g.a,{sx:{padding:"40px 40px 20px"}},l.a.createElement(f.a,{variant:"h6",component:"p",sx:{mb:1}},"Welcome to Indoor Scene Detector!"),l.a.createElement(f.a,{variant:"body",component:"p",sx:{mb:2}},"Please select or upload an image of an indoor scene to classify it.")),l.a.createElement(w,null,l.a.createElement(g.a,{sx:{display:"flex",flex:"0 1 250px",maxWidth:"400px",padding:"36px 24px",marginLeft:"20px",marginRight:"20px",boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px",flexDirection:"column",transition:"all 0.4s ease-in",borderRadius:"4px"}},l.a.createElement(Z,{setImage:o,image:n,toggle:O,setPredictions:u,setLoading:E,loading:b})),l.a.createElement(g.a,{sx:{display:"flex",flex:1,padding:"36px 24px",marginLeft:"20px",marginRight:"20px",boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px",flexDirection:{sm:"column",lg:"row"},transition:"all 0.4s ease-in",borderRadius:"4px"}},l.a.createElement(g.a,{sx:{width:"450px",display:"flex",flexDirection:"column",alignItems:"center",flex:1}},l.a.createElement(f.a,{variant:"h6",component:"div",sx:{display:"flex",alignSelf:"center",mb:"20px"}},"Image to classify:"),n&&l.a.createElement($,{src:n})),l.a.createElement(g.a,{sx:{display:"flex",flexDirection:"column",flex:1,alignItems:"center"}},l.a.createElement(f.a,{variant:"h6",component:"div",sx:{display:"flex",alignSelf:"center",mb:"20px"}},"Top 3 class predictions:"),b?l.a.createElement(f.a,{variant:"body",component:"div",sx:{display:"flex",alignSelf:"center",mb:"20px",flexDirection:"column"}},l.a.createElement(ee.a,{color:"secondary",size:"20px",sx:{alignSelf:"center"}}),"Calculating..."):m&&l.a.createElement(ae.a,{"aria-label":"simple table",sx:{width:"400px"}},l.a.createElement(te.a,null,l.a.createElement(ne.a,null,l.a.createElement(re.a,null),l.a.createElement(re.a,null,"Class"),l.a.createElement(re.a,null,"Probability"))),l.a.createElement(le.a,null,m.predictions.map(function(e,a){return l.a.createElement(ne.a,{key:e.class,sx:{"&:last-child td, &:last-child th":{border:0}}},l.a.createElement(re.a,{component:"th",scope:"row"},a+1),l.a.createElement(re.a,{component:"th",scope:"row"},e.class),l.a.createElement(re.a,{component:"th",scope:"row"},parseFloat(e.prob).toFixed(4)))}))),e&&!b&&l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{variant:"h6",component:"div",sx:{mt:"70px",display:"flex",alignSelf:"center"}},"Saliency Coefficient Heatmap (Key Pixels)"),l.a.createElement($,{src:"data:image/jpeg;base64,".concat(e)}))))))))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(W,null,l.a.createElement(ie,null))),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.24d7da51.chunk.js.map